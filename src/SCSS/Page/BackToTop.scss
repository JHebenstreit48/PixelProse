@use 'sass:color';
@use '@scss/Globals' as *;

/* =============================
   Variables (kept here for now)
   ============================= */
$primary-color: #007bff;
$hover-color: #0056b3;
$text-color: #ffffff;
$box-shadow: rgba(0, 0, 0, 0.20);

/* 44–52px touch target range (smaller than before) */
$scroll-width: 3rem;           // was 5rem
$scroll-height: 3rem;          // was 5rem
$scroll-font-size: 1.6rem;     // was 4rem
$scroll-padding: 0;            // we’re centering content, no inner pad
$scroll-border-radius: 50%;
$scroll-z-index: 1000;

/* =============================
   Modern "Back to top" button
   ============================= */
.scrollToTop {
  position: fixed;

  /* tuck into the corner, respect notches/safe-areas */
  right: max(0.85rem, env(safe-area-inset-right) + 0.5rem);
  bottom: max(1rem, env(safe-area-inset-bottom) + 1rem);

  width: $scroll-width;
  height: $scroll-height;
  border-radius: $scroll-border-radius;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(0,0,0,0.65);            /* glassy pill */
  color: $text-color;
  box-shadow: 0 6px 14px $box-shadow;
  cursor: pointer;
  z-index: $scroll-z-index;

  display: inline-flex;
  align-items: center;
  justify-content: center;

  /* keep the icon centered and slightly lifted */
  .scrollArrow {
    font-size: $scroll-font-size;
    line-height: 1;
    transform: translateY(-1px);
    font-weight: 600;
    user-select: none;
  }

  transition:
    transform .18s ease,
    background .22s ease,
    box-shadow .22s ease,
    border-color .22s ease;

  &:hover {
    background: color.scale($primary-color, $lightness: -5%); /* subtle brand hint */
    border-color: rgba(255,255,255,0.28);
    box-shadow: 0 0 0 3px rgba(0, 209, 255, .20);
    transform: translateY(-2px);
  }

  &:active {
    transform: scale(0.96);
  }

  /* reduce motion respect, but keep instant click behavior (TS does instant jump) */
  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }

  /* --- responsive tweaks nested under the component --- */
  @include maxw($tablet-portrait) {
    right: max(0.75rem, env(safe-area-inset-right) + 0.5rem);
    bottom: max(0.9rem, env(safe-area-inset-bottom) + 0.9rem);
    width: 2.85rem;
    height: 2.85rem;
    .scrollArrow { font-size: 1.45rem; }
  }

  @include maxw($cellphone-portrait) {
    right: max(0.6rem, env(safe-area-inset-right) + 0.5rem);
    bottom: max(0.8rem, env(safe-area-inset-bottom) + 0.8rem);
    width: 2.75rem;                /* ~44px min hit target */
    height: 2.75rem;
    .scrollArrow { font-size: 1.35rem; }
  }
}